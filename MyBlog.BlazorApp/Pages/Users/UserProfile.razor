@page "/user/{Username?}"

<div class="row">
    <div class="col-9">
        <div class="p-3 mb-2 rounded my-grad-blue">
            <h3>@Username</h3>

            <img src="@(_userDto.AvatarSrc)" class="rounded"/> <br />

            @if (IsAuth)
            {
                @if (IsCurrentUser)
                {
                    <div class="mb-2">
                        <a href="upload-avatar">Upload Avatar</a>
                    </div>

                    @if (!IsEditToggled)
                    {
                        <p>
                            Info about user: @_userDto.AboutMyself
                            <button class="btn btn-info mx-2" @onclick="@OnToggleEdit">Edit</button>
                        </p>
                    }
                    else
                    {
                        <InputText @bind-Value="_userDto.AboutMyself" />
                        <button class="btn btn-success" @onclick="@OnToggleEdit">Ok</button>
                        <br />
                    }
                }
                else
                {
                    if (IsFollowed)
                    {
                        <p class="green-light">Followed by You</p>
                        <button class="btn btn-danger" @onclick="@OnFollowToggle">Stop follow</button>
                    }
                    else
                    {
                        <button class="btn btn-success" @onclick="@OnFollowToggle">Start follow</button>
                    }
                    if (IsReader)
                    {
                        <p class="blue-light">Your Reader</p>
                    }
                }
            }
        </div>
    </div>

    <div class="col-3">

        <CascadingValue Value="@Username" Name="Username">
            <CascadingValue Value="@yes" Name="IsReaders">
                <ReadersOrFollowed @ref="childReaders" />
            </CascadingValue>
        </CascadingValue>

        <CascadingValue Value="@Username" Name="Username">
            <CascadingValue Value="@yes" Name="IsFollowedUsers">
                <ReadersOrFollowed />
            </CascadingValue>
        </CascadingValue>
    </div>

</div>


@code {
    bool yes = true;
}
